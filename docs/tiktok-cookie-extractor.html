<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Cookie Extractor - TrendTag</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #fe2c55;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        .step {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .step h3 {
            margin-top: 0;
            color: #667eea;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            font-weight: bold;
        }
        button:hover {
            transform: scale(1.05);
        }
        button:active {
            transform: scale(0.95);
        }
        .code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        .alert {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .alert-danger {
            background: #f8d7da;
            border-color: #f5c6cb;
        }
        .alert-success {
            background: #d4edda;
            border-color: #c3e6cb;
        }
        .instruction {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸª TikTok Cookie Extractor</h1>
        <p class="subtitle">CÃ´ng cá»¥ láº¥y cookie TikTok cho TrendTag Crawler (Playwright Format)</p>

        <div class="alert alert-danger">
            <strong>âš ï¸ LÆ¯U Ã:</strong> Script nÃ y chá»‰ hoáº¡t Ä‘á»™ng khi cháº¡y trÃªn trang TikTok Creative Center. Vui lÃ²ng:
            <ol>
                <li>Má»Ÿ tab má»›i</li>
                <li>Truy cáº­p: <a href="https://ads.tiktok.com/business/creativecenter/hashtag" target="_blank">TikTok Creative Center</a></li>
                <li>ÄÄƒng nháº­p TikTok</li>
                <li>Quay láº¡i tab nÃ y vÃ  nháº¥n nÃºt bÃªn dÆ°á»›i</li>
            </ol>
        </div>

        <div class="step">
            <h3>ğŸ“‹ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</h3>
            <ol>
                <li><strong>ÄÄƒng nháº­p TikTok Creative Center</strong> (link á»Ÿ trÃªn)</li>
                <li><strong>Má»Ÿ Developer Console:</strong>
                    <ul>
                        <li>Windows/Linux: Nháº¥n <code>F12</code> hoáº·c <code>Ctrl + Shift + I</code></li>
                        <li>Mac: Nháº¥n <code>Cmd + Option + I</code></li>
                    </ul>
                </li>
                <li><strong>Chuyá»ƒn sang tab "Console"</strong></li>
                <li><strong>Copy script bÃªn dÆ°á»›i</strong> vÃ  paste vÃ o Console</li>
                <li><strong>Nháº¥n Enter</strong></li>
                <li><strong>Cookie sáº½ tá»± Ä‘á»™ng copy</strong> vÃ o clipboard!</li>
            </ol>
        </div>

        <div class="step">
            <h3>ğŸ’» Script (Click Ä‘á»ƒ copy)</h3>
            <div class="code" id="scriptCode" onclick="copyScript()">// TikTok Cookie Extractor for TrendTag Crawler (Playwright Format)
(function() {
    console.clear();
    console.log('%cğŸª TikTok Cookie Extractor for Playwright', 'font-size: 20px; font-weight: bold; color: #fe2c55;');
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #fe2c55;');

    // Get all cookies
    const cookies = document.cookie;

    if (!cookies) {
        console.log('%câŒ KhÃ´ng tÃ¬m tháº¥y cookie nÃ o!', 'color: #dc3545; font-weight: bold;');
        console.log('%cVui lÃ²ng Ä‘Äƒng nháº­p TikTok Creative Center trÆ°á»›c.', 'color: #6c757d;');
        return;
    }

    // Parse cookies into Playwright format
    const cookieArray = cookies.split(';').map(c => {
        const [name, ...valueParts] = c.trim().split('=');
        return {
            name: name.trim(),
            value: valueParts.join('=').trim(),
            domain: '.tiktok.com',
            path: '/',
            expires: Math.floor(Date.now() / 1000) + (365 * 24 * 60 * 60), // 1 year from now
            httpOnly: false,
            secure: true,
            sameSite: 'None'
        };
    });

    // Important TikTok cookies
    const importantCookies = [
        'sessionid', 'sessionid_ss', 'sid_guard', 'sid_tt',
        'uid_tt', 'uid_tt_ss', 'store-idc', 'store-country-code',
        'tt_csrf_token', 'tt_chain_token', 'msToken',
        's_v_web_id', 'passport_csrf_token', 'tt_ticket_guard_client_data'
    ];

    console.log('%cğŸ“Š Tá»•ng sá»‘ cookies:', 'font-weight: bold; color: #495057;');
    console.log(`   Táº¥t cáº£: ${cookieArray.length}`);
    console.log(`   Quan trá»ng: ${cookieArray.filter(c => importantCookies.includes(c.name)).length}`);
    console.log('');

    // Format for appsettings.json (escaped JSON string)
    const jsonString = JSON.stringify(cookieArray);
    const escapedJsonString = jsonString
        .replace(/\\/g, '\\\\')  // Escape backslashes first
        .replace(/"/g, '\\"');   // Escape quotes

    console.log('%câœ… Cookie JSON (for appsettings.json):', 'font-weight: bold; color: #28a745; font-size: 14px;');
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #28a745;');
    console.log('%cPaste this into appsettings.json â†’ "TikTokCookies":', 'color: #6c757d; font-style: italic;');
    console.log('');
    console.log(`"TikTokCookies": "${escapedJsonString}"`);
    console.log('');
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #28a745;');

    // Copy to clipboard
    const finalString = `"TikTokCookies": "${escapedJsonString}"`;
    navigator.clipboard.writeText(finalString).then(() => {
        console.log('%câœ¨ ÄÃƒ COPY VÃ€O CLIPBOARD!', 'font-size: 16px; font-weight: bold; color: #28a745; background: #d4edda; padding: 10px;');
        console.log('%cBÃ¢y giá» paste vÃ o appsettings.json (thay tháº¿ dÃ²ng "TikTokCookies" cÅ©)', 'color: #6c757d; font-style: italic;');
    }).catch(() => {
        console.log('%câš ï¸ KhÃ´ng thá»ƒ tá»± Ä‘á»™ng copy. Vui lÃ²ng copy thá»§ cÃ´ng tá»« console.', 'color: #ffc107; font-weight: bold;');
    });

    console.log('');
    console.log('%cğŸ” Chi tiáº¿t cookies quan trá»ng:', 'font-weight: bold; color: #007bff;');
    importantCookies.forEach(name => {
        const cookie = cookieArray.find(c => c.name === name);
        if (cookie) {
            console.log(`   âœ“ ${name}: ${cookie.value.substring(0, 30)}...`);
        } else {
            console.log(`   âœ— ${name}: KHÃ”NG TÃŒM THáº¤Y`);
        }
    });

    console.log('');
    console.log('%câ° Cookie Expiry:', 'font-weight: bold; color: #dc3545;');
    console.log('   âš ï¸ Cookie TikTok thÆ°á»ng háº¿t háº¡n sau 7-30 ngÃ y');
    console.log('   âš ï¸ Náº¿u crawler lá»—i 401/403, cáº§n láº¥y cookie má»›i');
    console.log('');
    console.log('%cğŸ“‹ Preview (first 3 cookies):', 'font-weight: bold; color: #495057;');
    console.log(JSON.stringify(cookieArray.slice(0, 3), null, 2));
    console.log('');
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #fe2c55;');
})();</div>
            <button onclick="copyScript()" style="margin-top: 15px;">ğŸ“‹ Copy Script</button>
        </div>

        <div class="instruction">
            <h4>ğŸ¯ Sau Khi Cháº¡y Script:</h4>
            <ol>
                <li>Cookie JSON sáº½ tá»± Ä‘á»™ng copy vÃ o clipboard</li>
                <li>Má»Ÿ file: <code>d:\Task\TrendTag\HashTag\appsettings.json</code></li>
                <li>TÃ¬m dÃ²ng <code>"TikTokCookies"</code></li>
                <li>Thay tháº¿ toÃ n bá»™ dÃ²ng Ä‘Ã³ báº±ng ná»™i dung Ä‘Ã£ copy</li>
                <li>Save file</li>
                <li>Restart á»©ng dá»¥ng TrendTag</li>
            </ol>
        </div>

        <div class="alert">
            <strong>ğŸ” Báº£o Máº­t:</strong>
            <ul>
                <li>KHÃ”NG chia sáº» cookie vá»›i ngÆ°á»i khÃ¡c</li>
                <li>KHÃ”NG commit appsettings.json lÃªn Git</li>
                <li>Cookie háº¿t háº¡n sau 7-30 ngÃ y, cáº§n update Ä‘á»‹nh ká»³</li>
            </ul>
        </div>
    </div>

    <script>
        function copyScript() {
            const scriptText = document.getElementById('scriptCode').textContent;
            navigator.clipboard.writeText(scriptText).then(() => {
                alert('âœ… ÄÃ£ copy script vÃ o clipboard!\n\nBÃ¢y giá»:\n1. Má»Ÿ TikTok Creative Center\n2. Nháº¥n F12 (Console)\n3. Paste script vÃ  Enter');
            }).catch(() => {
                alert('âŒ KhÃ´ng thá»ƒ copy tá»± Ä‘á»™ng.\n\nVui lÃ²ng copy thá»§ cÃ´ng script tá»« khung mÃ u Ä‘en.');
            });
        }
    </script>
</body>
</html>
