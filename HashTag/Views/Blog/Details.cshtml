@model HashTag.ViewModels.BlogDetailsViewModel
@using HashTag.Helpers
@{
    var localizedTitle = Model.Post.GetLocalizedTitle(Model.IsEnglish);
    var localizedContent = Model.Post.GetLocalizedContent(Model.IsEnglish);
    ViewData["Title"] = localizedTitle;
    Layout = "_LayoutPublic";
}

<!-- Blog Post Details -->
<div class="container py-5">
    <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">@Localizer["Nav_Home"]</a></li>
                    <li class="breadcrumb-item"><a href="/blog">@Localizer["Nav_Blog"]</a></li>
                    @if (Model.Post.Category != null)
                    {
                        <li class="breadcrumb-item"><a href="/blog/category/@Model.Post.Category.Slug">@Model.Post.Category.GetLocalizedName(Model.IsEnglish)</a></li>
                    }
                    <li class="breadcrumb-item active" aria-current="page">@localizedTitle</li>
                </ol>
            </nav>

            <!-- Article -->
            <article class="blog-post">
                <!-- Category Badge -->
                @if (Model.Post.Category != null)
                {
                    <div class="mb-3">
                        <a href="/blog/category/@Model.Post.Category.Slug" class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 rounded-pill text-decoration-none">
                            @Model.Post.Category.GetLocalizedName(Model.IsEnglish)
                        </a>
                    </div>
                }

                <!-- Title -->
                <h1 class="display-5 fw-bold mb-4">@localizedTitle</h1>

                <!-- Meta Info -->
                <div class="post-meta d-flex flex-wrap gap-4 mb-4 text-muted">
                    <span>
                        <i class="bi bi-person-circle me-2"></i>
                        @Model.Post.Author
                    </span>
                    @if (Model.Post.PublishedAt.HasValue)
                    {
                        <span>
                            <i class="bi bi-calendar3 me-2"></i>
                            @Model.Post.PublishedAt.Value.ToString("dd/MM/yyyy")
                        </span>
                    }
                    <span>
                        <i class="bi bi-clock me-2"></i>
                        @Model.Post.ReadingTimeMinutes @Localizer["Blog_MinuteRead"]
                    </span>
                    <span>
                        <i class="bi bi-eye me-2"></i>
                        @Model.Post.ViewCount.ToString("N0") @Localizer["Blog_ViewCount"]
                    </span>
                </div>

                <!-- Featured Image -->
                <div class="featured-image mb-4">
                    @if (!string.IsNullOrEmpty(Model.Post.FeaturedImage))
                    {
                        <img src="@Model.Post.FeaturedImage" alt="@Model.Post.Title" class="img-fluid rounded-4 shadow-sm w-100" style="max-height: 500px; object-fit: cover;">
                    }
                    else
                    {
                        <div class="blog-placeholder rounded-4 shadow-sm w-100" style="height: 300px;"></div>
                    }
                </div>

                <!-- Tags -->
                @if (Model.Post.BlogPostTags != null && Model.Post.BlogPostTags.Any())
                {
                    <div class="post-tags mb-4">
                        <i class="bi bi-tags me-2 text-muted"></i>
                        @foreach (var postTag in Model.Post.BlogPostTags)
                        {
                            <a href="/blog/tag/@postTag.BlogTag.Slug" class="badge bg-light text-dark px-3 py-2 rounded-pill text-decoration-none me-2 mb-2">
                                #@postTag.BlogTag.Name
                            </a>
                        }
                    </div>
                }

                <hr class="my-4">

                <!-- Post Content -->
                <div class="post-content">
                    @Html.Raw(localizedContent)
                </div>

                <hr class="my-5">

                <!-- Internal Links - Related Tools (SEO Important) -->
                <div class="related-tools-box mb-5 p-4 rounded-4" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-left: 4px solid #667eea;">
                    <h6 class="fw-bold mb-3">
                        <i class="bi bi-tools text-primary me-2"></i>
                        @Localizer["Blog_UsefulTools"]
                    </h6>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <a href="@LocalizedUrlHelper.GetAIGeneratorUrl(Context)" class="text-decoration-none">
                                <div class="d-flex align-items-center p-2 bg-white rounded-3 shadow-sm hover-lift">
                                    <i class="bi bi-lightbulb-fill text-warning fs-4 me-2"></i>
                                    <div>
                                        <strong class="text-dark small">@Localizer["Blog_CreateHashtagAI"]</strong>
                                        <div class="text-muted" style="font-size: 0.75rem;">@Localizer["Blog_SmartHashtagSuggestion"]</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-4">
                            <a href="/" class="text-decoration-none">
                                <div class="d-flex align-items-center p-2 bg-white rounded-3 shadow-sm hover-lift">
                                    <i class="bi bi-fire text-danger fs-4 me-2"></i>
                                    <div>
                                        <strong class="text-dark small">@Localizer["Blog_HashtagTrending"]</strong>
                                        <div class="text-muted" style="font-size: 0.75rem;">@Localizer["Blog_TopHotHashtags"]</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-4">
                            <a href="@LocalizedUrlHelper.GetGrowthTrackingUrl(Context)" class="text-decoration-none">
                                <div class="d-flex align-items-center p-2 bg-white rounded-3 shadow-sm hover-lift">
                                    <i class="bi bi-graph-up-arrow text-success fs-4 me-2"></i>
                                    <div>
                                        <strong class="text-dark small">@Localizer["Blog_TrackGrowth"]</strong>
                                        <div class="text-muted" style="font-size: 0.75rem;">@Localizer["Blog_TrendAnalysis"]</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Share Buttons -->
                <div class="share-buttons mb-5">
                    <h6 class="fw-bold mb-3">@Localizer["Blog_SharePost"]</h6>
                    <div class="d-flex gap-2">
                        <a href="https://www.facebook.com/sharer/sharer.php?u=@ViewData["CanonicalUrl"]" target="_blank" class="btn btn-outline-primary btn-sm rounded-pill">
                            <i class="bi bi-facebook me-1"></i> Facebook
                        </a>
                        <a href="https://twitter.com/intent/tweet?url=@ViewData["CanonicalUrl"]&text=@Model.Post.Title" target="_blank" class="btn btn-outline-info btn-sm rounded-pill">
                            <i class="bi bi-twitter me-1"></i> Twitter
                        </a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=@ViewData["CanonicalUrl"]&title=@Model.Post.Title" target="_blank" class="btn btn-outline-primary btn-sm rounded-pill">
                            <i class="bi bi-linkedin me-1"></i> LinkedIn
                        </a>
                    </div>
                </div>

                <!-- Related Posts -->
                @if (Model.RelatedPosts != null && Model.RelatedPosts.Any())
                {
                    <div class="related-posts mt-5">
                        <h3 class="fw-bold mb-4">
                            <i class="bi bi-bookmarks text-primary me-2"></i>
                            @Localizer["Blog_RelatedPosts"]
                        </h3>
                        <div class="row g-4">
                            @foreach (var relatedPost in Model.RelatedPosts)
                            {
                                <div class="col-md-6">
                                    <div class="card h-100 shadow-sm border-0 rounded-3 hover-lift">
                                        @if (!string.IsNullOrEmpty(relatedPost.FeaturedImage))
                                        {
                                            <img src="@relatedPost.FeaturedImage" class="card-img-top" alt="@relatedPost.Title" style="height: 150px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <div class="card-img-top blog-placeholder-md"></div>
                                        }
                                        <div class="card-body">
                                            @if (relatedPost.Category != null)
                                            {
                                                <span class="badge bg-primary bg-opacity-10 text-primary px-2 py-1 rounded-pill small mb-2">
                                                    @relatedPost.Category.GetLocalizedName(Model.IsEnglish)
                                                </span>
                                            }
                                            <h6 class="card-title fw-bold">
                                                <a href="/blog/@relatedPost.GetLocalizedSlug(Model.IsEnglish)" class="text-decoration-none text-dark stretched-link">
                                                    @relatedPost.GetLocalizedTitle(Model.IsEnglish)
                                                </a>
                                            </h6>
                                            <div class="text-muted small mt-2">
                                                <i class="bi bi-clock me-1"></i>
                                                @relatedPost.ReadingTimeMinutes @Localizer["Blog_MinuteRead"]
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </article>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Recent Posts Widget -->
            @if (Model.RecentPosts != null && Model.RecentPosts.Any())
            {
                <div class="card shadow-sm border-0 rounded-4 mb-4">
                    <div class="card-body">
                        <h5 class="card-title fw-bold mb-4">
                            <i class="bi bi-clock-history text-primary me-2"></i>
                            @Localizer["Blog_RecentPosts"]
                        </h5>
                        <div class="list-group list-group-flush">
                            @foreach (var recentPost in Model.RecentPosts)
                            {
                                <a href="/blog/@recentPost.GetLocalizedSlug(Model.IsEnglish)" class="list-group-item list-group-item-action border-0 px-0">
                                    <div class="d-flex align-items-start">
                                        @if (!string.IsNullOrEmpty(recentPost.FeaturedImage))
                                        {
                                            <img src="@recentPost.FeaturedImage" alt="@recentPost.GetLocalizedTitle(Model.IsEnglish)" class="rounded me-3" style="width: 60px; height: 60px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <div class="blog-placeholder-sm me-3"></div>
                                        }
                                        <div>
                                            <h6 class="mb-1 fw-bold small">@recentPost.GetLocalizedTitle(Model.IsEnglish)</h6>
                                            <small class="text-muted">
                                                @if (recentPost.PublishedAt.HasValue)
                                                {
                                                    <span>@recentPost.PublishedAt.Value.ToString("dd/MM/yyyy")</span>
                                                }
                                            </small>
                                        </div>
                                    </div>
                                </a>
                            }
                        </div>
                    </div>
                </div>
            }

            <!-- Back to Blog Button -->
            <div class="card shadow-sm border-0 rounded-4 mb-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body text-center text-white">
                    <h5 class="card-title fw-bold mb-3">@Localizer["Blog_ExploreMore"]</h5>
                    <p class="small mb-3">@Localizer["Blog_ViewAllPosts"]</p>
                    <a href="/blog" class="btn btn-light btn-sm rounded-pill px-4">
                        <i class="bi bi-arrow-left me-2"></i>
                        @Localizer["Blog_BackToBlog"]
                    </a>
                </div>
            </div>

            <!-- CTA - Back to Home -->
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-body text-center">
                    <i class="bi bi-hash text-primary" style="font-size: 3rem;"></i>
                    <h5 class="card-title fw-bold mt-3 mb-3">@Localizer["Blog_FindTrendingHashtags"]</h5>
                    <p class="small text-muted mb-3">@Localizer["Blog_DiscoverTopHashtags"]</p>
                    <a href="/" class="btn btn-primary btn-sm rounded-pill px-4">
                        <i class="bi bi-house-fill me-2"></i>
                        @Localizer["Blog_BackToHome"]
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .post-content {
        font-size: 1.1rem;
        line-height: 1.8;
    }

    .post-content h2 {
        font-size: 1.75rem;
        font-weight: 700;
        margin-top: 2rem;
        margin-bottom: 1rem;
        color: #333;
    }

    .post-content h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: #444;
    }

    .post-content p {
        margin-bottom: 1.25rem;
    }

    .post-content ul, .post-content ol {
        margin-bottom: 1.25rem;
        padding-left: 2rem;
    }

    .post-content li {
        margin-bottom: 0.5rem;
    }

    .post-content strong {
        font-weight: 600;
        color: #333;
    }

    .post-content a {
        color: #667eea;
        text-decoration: underline;
    }

    .post-content a:hover {
        color: #764ba2;
    }

    .breadcrumb-item a {
        text-decoration: none;
        color: #667eea;
    }

    .breadcrumb-item a:hover {
        color: #764ba2;
    }
</style>
